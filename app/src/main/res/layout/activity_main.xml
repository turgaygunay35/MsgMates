<androidx.coordinatorlayout.widget.CoordinatorLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:app="http://schemas.android.com/apk/res-auto"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@color/background_primary">

  <!-- MsgMates Header - En üstte (ayrı) -->
  <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:padding="16dp"
      android:background="@drawable/bg_appbar_gradient"
      android:gravity="center_vertical">

      <ImageView
          android:id="@+id/iv_logo"
          android:layout_width="32dp"
          android:layout_height="32dp"
          android:src="@drawable/msg_logo"
          android:contentDescription="@string/title_msgmates" />

      <TextView
          android:id="@+id/tv_title"
          android:layout_width="0dp"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:layout_marginStart="12dp"
          android:text="@string/title_msgmates"
          android:textSize="22sp"
          android:textStyle="bold"
          android:textColor="@android:color/white"
          android:fontFamily="sans-serif-medium" />

      <!-- Arama İkonu -->
      <ImageButton
          android:id="@+id/btn_search"
          android:layout_width="40dp"
          android:layout_height="40dp"
          android:src="@drawable/ic_search"
          android:background="?attr/selectableItemBackgroundBorderless"
          android:contentDescription="@string/hint_search_chats"
          android:layout_marginEnd="8dp" />

      <!-- Yenile Butonu (Contacts için) -->
      <ImageButton
          android:id="@+id/btn_refresh"
          android:layout_width="40dp"
          android:layout_height="40dp"
          android:src="@drawable/ic_refresh"
          android:background="?attr/selectableItemBackgroundBorderless"
          android:contentDescription="@string/refresh_contacts"
          android:layout_marginEnd="8dp"
          android:visibility="gone" />

      <!-- Hızlı Aksiyon Butonu -->
      <ImageButton
          android:id="@+id/btn_quick_action"
          android:layout_width="40dp"
          android:layout_height="40dp"
          android:src="@drawable/ic_add"
          android:background="?attr/selectableItemBackgroundBorderless"
          android:contentDescription="@string/quick_actions"
          android:layout_marginEnd="8dp" />

      <!-- Durum Kapsülü Container -->
      <FrameLayout
          android:id="@+id/status_capsule_container"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />

  </LinearLayout>

  <!-- AppBar Container - 4'lü ana barın hemen üstünde -->
  <LinearLayout
      android:id="@+id/appbar_container"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:layout_gravity="bottom"
      android:layout_marginBottom="80dp"
      android:background="@color/white"
      android:elevation="2dp"
      android:stateListAnimator="@animator/appbar_elevation">

      <!-- Arama Kapsayıcısı -->
      <FrameLayout
          android:id="@+id/search_container"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:visibility="gone"
          android:padding="16dp"
          android:background="@color/surface">

          <com.google.android.material.textfield.TextInputLayout
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:hint="@string/hint_search_chats"
              style="@style/Widget.Material3.TextInputLayout.OutlinedBox">

              <com.google.android.material.textfield.TextInputEditText
                  android:id="@+id/et_search"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:imeOptions="actionSearch"
                  android:inputType="text"
                  android:contentDescription="@string/hint_search_chats" />

          </com.google.android.material.textfield.TextInputLayout>

      </FrameLayout>

      <!-- Filtre Şeridi -->
      <HorizontalScrollView
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:fillViewport="true"
          android:fadingEdge="none"
          android:scrollbars="none"
          android:background="@color/surface"
          android:padding="8dp">

          <com.google.android.material.chip.ChipGroup
              android:id="@+id/chips_conversation_filters"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layoutDirection="locale"
              android:tag="qa_chips"
              app:singleLine="true"
              app:chipSpacingHorizontal="8dp"
              app:chipSpacingVertical="4dp">

              <com.google.android.material.chip.Chip
                  android:id="@+id/chip_filter_all"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/filter_all"
                  android:contentDescription="@string/cd_filter_chip"
                  android:background="@drawable/selector_chip_background"
                  android:textColor="@color/selector_chip_text"
                  app:chipIconVisible="false"
                  app:chipMinHeight="36dp"
                  app:chipStrokeWidth="0dp"
                  app:checkedIconVisible="false"
                  android:scaleType="center"
                  style="@style/Widget.Material3.Chip.Filter" />

              <com.google.android.material.chip.Chip
                  android:id="@+id/chip_filter_unread"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/filter_unread"
                  android:contentDescription="@string/cd_filter_chip"
                  android:background="@drawable/selector_chip_background"
                  android:textColor="@color/selector_chip_text"
                  app:chipIconVisible="false"
                  app:chipMinHeight="36dp"
                  app:chipStrokeWidth="0dp"
                  app:checkedIconVisible="false"
                  android:scaleType="center"
                  style="@style/Widget.Material3.Chip.Filter" />

              <com.google.android.material.chip.Chip
                  android:id="@+id/chip_filter_groups"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/filter_groups"
                  android:contentDescription="@string/cd_filter_chip"
                  android:background="@drawable/selector_chip_background"
                  android:textColor="@color/selector_chip_text"
                  app:chipIconVisible="false"
                  app:chipMinHeight="36dp"
                  app:chipStrokeWidth="0dp"
                  app:checkedIconVisible="false"
                  android:scaleType="center"
                  style="@style/Widget.Material3.Chip.Filter" />

              <com.google.android.material.chip.Chip
                  android:id="@+id/chip_filter_favorites"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/filter_favorites"
                  android:contentDescription="@string/cd_filter_chip"
                  android:background="@drawable/selector_chip_background"
                  android:textColor="@color/selector_chip_text"
                  app:chipIconVisible="false"
                  app:chipMinHeight="36dp"
                  app:chipStrokeWidth="0dp"
                  app:checkedIconVisible="false"
                  android:scaleType="center"
                  style="@style/Widget.Material3.Chip.Filter" />

              <com.google.android.material.chip.Chip
                  android:id="@+id/chip_filter_archived"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/filter_archived"
                  android:contentDescription="@string/cd_filter_chip"
                  android:background="@drawable/selector_chip_background"
                  android:textColor="@color/selector_chip_text"
                  app:chipIconVisible="false"
                  app:chipMinHeight="36dp"
                  app:chipStrokeWidth="0dp"
                  app:checkedIconVisible="false"
                  android:scaleType="center"
                  style="@style/Widget.Material3.Chip.Filter" />

              <com.google.android.material.chip.Chip
                  android:id="@+id/chip_filter_disaster"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:text="@string/filter_disaster"
                  android:contentDescription="@string/cd_filter_chip"
                  android:background="@drawable/selector_chip_background"
                  android:textColor="@color/selector_chip_text"
                  app:chipIconVisible="false"
                  app:chipMinHeight="36dp"
                  app:chipStrokeWidth="0dp"
                  app:checkedIconVisible="false"
                  android:scaleType="center"
                  style="@style/Widget.Material3.Chip.Filter" />

          </com.google.android.material.chip.ChipGroup>

      </HorizontalScrollView>

  </LinearLayout>

  <androidx.fragment.app.FragmentContainerView
      android:id="@+id/nav_host"
      android:name="androidx.navigation.fragment.NavHostFragment"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_marginTop="64dp"
      android:layout_marginBottom="80dp"
      app:defaultNavHost="true"
      app:navGraph="@navigation/nav_main"/>

  <!-- Bottom Navigation -->
  <com.google.android.material.bottomnavigation.BottomNavigationView
      android:id="@+id/bottomBar"
      style="@style/Widget.MsgMates.BottomNav"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_gravity="bottom"
      android:background="@drawable/bg_nav_container"
      android:elevation="8dp"
      app:itemIconTint="@drawable/nav_icon_tint"
      app:itemTextColor="@drawable/nav_label_tint"
      app:labelVisibilityMode="labeled"
      app:menu="@menu/menu_bottom_nav" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>
